@page
@model SignalR.WebClient.Pages.TransactionDetailModel
@{
    ViewData["Title"] = "TransactionDetail";
}

<h2>TransactionDetail</h2>
<h3 id="message">Ready to connect...</h3>

@using Microsoft.Extensions.Options
@inject IOptions<AppSettings> settings

@section Scripts {

    <script type="text/javascript">

        var messageComponant = document.getElementById("message");

        // establish connection to signalrhub using url sepcified in appsettings -Sahil 09-08-2019 5:10 PM
        var connection = new signalR.HubConnectionBuilder().withUrl("@settings.Value.SignalRHubUrl/NotificationHub").build();
        messageComponant.innerHTML = "Connecting...";


        connection.start().then(function () {
            messageComponant.innerHTML = "Connection done.. waiting for welcome message..";
        }).catch(function (err) {
                return console.error(err.toString());
        });

        connection.on("WelcomeMessage", function (message) {
            messageComponant.innerHTML = message;
        });

    </script>

}
